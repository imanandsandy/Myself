<!DOCTYPE html>
<html>
<head>
    <title>Task Scheduler</title>
</head>
<body>
    <h1>Task Scheduler</h1>
    
    <form action="/crystal-onyxscheduler-srv/home" method="get">
        <label for="config">Select Config File:</label>
        <select name="config" id="config" onchange="this.form.submit()">
            {% for file in config_files %}
                <option value="{{ file }}" {% if file == selected_config %}selected{% endif %}>{{ file }}</option>
            {% endfor %}
        </select>
    </form>
    
    <h2>Scheduled Tasks</h2>
    <ul>
        {% for task in tasks %}
            <li>
                <strong>{{ task.name }}</strong> - {{ task.command }} (Cron: {{ task.cron }})
                <a href="/crystal-onyxscheduler-srv/delete/{{ task.name }}?config={{ selected_config }}">Delete</a>
            </li>
        {% endfor %}
    </ul>
    
    <h2>Completed Jobs</h2>
    <ul>
        {% for job in completed_jobs %}
            <li><strong>{{ job.name }}</strong> - {{ job.status }}</li>
        {% endfor %}
    </ul>
    
    <h2>Add New Task</h2>
    <form action="/crystal-onyxscheduler-srv/add" method="post">
        <input type="hidden" name="config_file" value="{{ selected_config }}">
        <label>Name: <input type="text" name="name" required></label><br>
        <label>Command: <input type="text" name="command" required></label><br>
        <label>Cron Expression: <input type="text" name="cron" required></label><br>
        <button type="submit">Add Task</button>
    </form>
</body>
</html>
